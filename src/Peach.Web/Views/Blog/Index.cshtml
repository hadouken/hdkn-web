@using Peach.Data.Domain
@model Peach.Web.Models.BlogListDto

@{
    ViewBag.Title = "Blog - Hadouken";
}

@if (User.IsInRole(Role.ContentWriter))
{ 
    @section Actions
    {
        @Html.ActionLink("New blog post", "New") 
    }
}

@foreach (var post in Model.BlogPosts)
{
    <div class="post">
        <h3>
            @Html.ActionLink(post.Title, "Details", new{year=post.PublishedDate.Year,month=post.PublishedDate.Month.ToString().PadLeft(2, '0'),slug=post.Slug})
            <small class="timeago" title="@post.PublishedDate.ToString("yyyy-MM-ddTHH:mm:sszzz")"></small>
        </h3>
        @post.Content
    </div>
}

<ul class="pager">
    @if (Model.HasPreviousPage)
    {
        <li class="previous"><a href="/blog/page/@(Model.CurrentPage + 1)">&larr; Older</a></li>
    }
    
    @if (Model.HasNextPage)
    {
        <li class="next"><a href="#">Newer &rarr;</a></li>
    }
</ul>